{
  "detectors_ran": [
    "yin",
    "sacf",
    "cqt"
  ],
  "diagnostics": {
    "stage_b_mode": "classic",
    "instrument": "piano_61key",
    "profile": null,
    "profile_applied": false,
    "profile_special": {},
    "polyphonic_context": true,
    "detectors_initialized": [
      "yin",
      "sacf",
      "cqt"
    ],
    "separation": {
      "requested": false,
      "is_auto": false,
      "synthetic_requested": false,
      "mode": "disabled",
      "synthetic_ran": false,
      "htdemucs_ran": false,
      "fallback": false,
      "preset": null,
      "resolved_overlap": null,
      "resolved_shifts": null,
      "shift_range": null
    },
    "harmonic_masking": {
      "enabled": true,
      "applied": true,
      "mask_width": 0.02,
      "n_harmonics": 12
    },
    "iss": {
      "enabled": true,
      "layers_found": 2,
      "max_layers": 8
    },
    "cqt_gate": {
      "requested": true,
      "active": false,
      "librosa_available": true
    },
    "skyline_mode": "skyline_top_voice",
    "voice_tracking": {
      "max_alt_voices": 1,
      "max_jump_cents": 150.0
    },
    "global_tuning_cents": -1.317596435546875,
    "debug_curves": {
      "mix": {
        "fused_f0": {
          "len": 345,
          "nonzero": 178,
          "min": 439.6651611328125,
          "max": 439.6651611328125
        },
        "smoothed_f0": {
          "len": 345,
          "nonzero": 178,
          "min": 439.6651611328125,
          "max": 439.6651611328125
        }
      },
      "melody_masked": {
        "fused_f0": {
          "len": 345,
          "nonzero": 12,
          "min": 452.54833984375,
          "max": 452.54833984375
        },
        "smoothed_f0": {
          "len": 345,
          "nonzero": 12,
          "min": 452.54833984375,
          "max": 452.54833984375
        }
      },
      "residual_masked": {
        "fused_f0": {
          "len": 345,
          "nonzero": 179,
          "min": 439.6651611328125,
          "max": 439.6651611328125
        },
        "smoothed_f0": {
          "len": 345,
          "nonzero": 179,
          "min": 439.6651611328125,
          "max": 439.6651611328125
        }
      }
    },
    "layer_conf_summaries": {
      "mix": [
        {
          "len": 346,
          "nonzero": 178,
          "min": 0.9459301829338074,
          "max": 1.0
        },
        {
          "len": 346,
          "nonzero": 201,
          "min": 0.2796051800251007,
          "max": 1.0
        }
      ],
      "melody_masked": [
        {
          "len": 345,
          "nonzero": 12,
          "min": 0.9848789572715759,
          "max": 0.9848789572715759
        }
      ],
      "residual_masked": [
        {
          "len": 346,
          "nonzero": 179,
          "min": 0.9459301829338074,
          "max": 1.0
        },
        {
          "len": 346,
          "nonzero": 201,
          "min": 0.2796051800251007,
          "max": 1.0
        }
      ]
    }
  },
  "config": {
    "device": "cpu",
    "seed": null,
    "instrument_override": null,
    "stage_a": {
      "target_sample_rate": 44100,
      "channel_handling": "mono_sum",
      "dc_offset_removal": true,
      "transient_pre_emphasis": {
        "enabled": true,
        "alpha": 0.97
      },
      "high_pass_filter": {},
      "high_pass_filter_cutoff": {
        "value": 55.0
      },
      "high_pass_filter_order": {
        "value": 4
      },
      "silence_trimming": {
        "enabled": false,
        "top_db": 50
      },
      "loudness_normalization": {
        "enabled": true,
        "target_lufs": -23.0
      },
      "peak_limiter": {
        "enabled": false,
        "mode": "soft",
        "ceiling_db": -1.0
      },
      "noise_floor_estimation": {
        "percentile": 30
      },
      "bpm_detection": {
        "enabled": true,
        "min_bpm": 55.0,
        "max_bpm": 215.0
      }
    },
    "stage_b": {
      "instrument": "piano_61key",
      "transcription_mode": "classic",
      "bp_onset_threshold": 0.5,
      "bp_frame_threshold": 0.3,
      "bp_minimum_note_length_ms": 127.7,
      "bp_min_hz": 27.5,
      "bp_max_hz": 4186.0,
      "bp_melodia_trick": true,
      "active_stems": null,
      "apply_instrument_profile": true,
      "separation": {
        "enabled": false,
        "model": "htdemucs",
        "synthetic_model": false,
        "overlap": 0.25,
        "shifts": 1,
        "polyphonic_dominant_preset": {
          "overlap": 0.75,
          "shift_range": [
            2,
            5
          ],
          "overlap_candidates": [
            0.5,
            0.75
          ]
        },
        "harmonic_masking": {
          "enabled": true,
          "mask_width": 0.02,
          "n_harmonics": 12
        }
      },
      "confidence_voicing_threshold": 0.58,
      "polyphonic_voicing_relaxation": 0.07,
      "confidence_priority_floor": 0.5,
      "pitch_disagreement_cents": 70.0,
      "ensemble_weights": {
        "swiftf0": 0.5,
        "sacf": 0.3,
        "cqt": 0.2,
        "yin": 0.3,
        "rmvpe": 0.5,
        "crepe": 1.0
      },
      "ensemble_mode": "static",
      "smoothing_method": "tracker",
      "viterbi_transition_smoothness": 0.5,
      "viterbi_jump_penalty": 0.6,
      "polyphonic_peeling": {
        "max_layers": 8,
        "mask_width": 0.03,
        "min_mask_width": 0.02,
        "max_mask_width": 0.08,
        "mask_growth": 1.1,
        "mask_shrink": 0.9,
        "harmonic_snr_stop_db": 3.0,
        "residual_rms_stop_ratio": 0.08,
        "residual_flatness_stop": 0.45,
        "validator_cents_tolerance": 50.0,
        "validator_agree_window": 5,
        "validator_disagree_decay": 0.6,
        "validator_min_agree_frames": 2,
        "validator_min_disagree_frames": 2,
        "max_harmonics": 12,
        "force_on_mix": true,
        "iss_adaptive": true,
        "strength_min": 0.8,
        "strength_max": 1.2,
        "flatness_thresholds": [
          0.3,
          0.6
        ],
        "use_freq_aware_masks": true
      },
      "voice_tracking": {
        "max_alt_voices": 1,
        "max_jump_cents": 150.0,
        "hangover_frames": 4,
        "smoothing": 0.35,
        "confidence_bias": 5.0,
        "skyline_mode": "top_voice"
      },
      "detectors": {
        "rmvpe": {
          "enabled": false,
          "fmin": 50.0,
          "fmax": 1200.0,
          "hop_length": 160,
          "silence_threshold": 0.04
        },
        "crepe": {
          "enabled": false,
          "model_capacity": "small",
          "fmin": 80.0,
          "fmax": 1000.0,
          "use_viterbi": false,
          "step_ms": 10,
          "conf_threshold": 0.5
        },
        "swiftf0": {
          "enabled": false
        },
        "yin": {
          "enabled": true,
          "fmin": 80.0,
          "fmax": 1000.0,
          "hop_length": 256,
          "frame_length": 4096,
          "threshold": 0.08,
          "enable_multires_f0": true,
          "enable_octave_correction": false,
          "octave_jump_penalty": 0.35
        },
        "sacf": {
          "enabled": true
        },
        "cqt": {
          "enabled": true,
          "enable_salience_morphology": false,
          "morph_kernel": 3
        }
      },
      "melody_filtering": {
        "median_window": 5,
        "voiced_prob_threshold": 0.4,
        "rms_gate_db": -40.0,
        "fmin_hz": 80.0,
        "fmax_hz": 1000.0
      },
      "onsets_and_frames": {
        "enabled": false,
        "onset_threshold": 0.5,
        "frame_threshold": 0.5,
        "min_note_duration_ms": 30
      }
    },
    "stage_c": {
      "apply_instrument_profile": true,
      "segmentation_method": {
        "method": "hmm",
        "states": [
          "attack",
          "sustain",
          "silence"
        ],
        "use_state_smoothing": false,
        "transition_penalty": 0.8,
        "stay_bonus": 0.05,
        "silence_bias": 0.1,
        "energy_weight": 0.35,
        "min_onset_frames": 2,
        "release_frames": 2,
        "time_merge_frames": 1,
        "split_semitone": 0.7
      },
      "min_note_duration_ms": 30.0,
      "min_note_duration_ms_poly": 45.0,
      "frame_stability": {
        "stable_frames_required": 2
      },
      "pitch_tolerance_cents": 50.0,
      "gap_tolerance_s": 0.05,
      "confidence_threshold": 0.2,
      "confidence_hysteresis": {
        "start": 0.6,
        "end": 0.4
      },
      "gap_filling": {
        "max_gap_ms": 100.0
      },
      "polyphonic_confidence": {
        "melody": 0.55,
        "accompaniment": 0.4
      },
      "velocity_map": {
        "min_db": -40.0,
        "max_db": -4.0,
        "min_vel": 20.0,
        "max_vel": 105.0,
        "noise_floor_db_margin": 6.0
      },
      "use_onset_refinement": true,
      "use_repeated_note_splitter": true,
      "polyphony_filter": {
        "mode": "skyline_top_voice"
      },
      "quantize": {
        "enabled": false
      }
    },
    "stage_d": {
      "forced_key": null,
      "divisions_per_quarter": 24,
      "quantization_grid": 16,
      "staff_split_point": {
        "pitch": 60
      },
      "staccato_marking": {
        "threshold_beats": 0.25
      },
      "quantization_mode": "grid",
      "light_rubato_snap_ms": 30.0,
      "glissando_threshold_general": {
        "enabled": false,
        "min_semitones": 2.0,
        "max_time_ms": 500.0
      },
      "glissando_handling_piano": {
        "enabled": false
      },
      "tempo_bpm": 120.0,
      "time_signature": "4/4"
    },
    "segmented_transcription": {
      "enabled": false,
      "segment_sec": 10.0,
      "overlap_sec": 2.0,
      "retry_quality_threshold": 0.9,
      "retry_max_candidates": 3,
      "density_target_notes_per_sec": 8.0,
      "density_penalty_span": 6.0
    },
    "instrument_profiles": []
  },
  "stage_timings": {
    "stage_a_s": 3.7805611580001823,
    "stage_b_s": 21.72087015599982,
    "stage_c_s": 0.009590934999778256,
    "stage_d_s": 0.09762497999963671,
    "total_s": 25.608647228999416
  },
  "detector_confidences": {
    "mix": {
      "yin": 0.5730888247489929,
      "sacf": 0.5187726616859436,
      "cqt": 1.0
    },
    "melody_masked": {
      "yin": 0.5650591254234314,
      "sacf": 0.5274865627288818,
      "cqt": 0.8497933745384216
    },
    "residual_masked": {
      "yin": 0.5727906227111816,
      "sacf": 0.5361735820770264,
      "cqt": 1.0
    }
  },
  "artifacts_present": {
    "musicxml": true,
    "midi_bytes": true,
    "timeline": true
  },
  "separation_preset": {
    "preset": "default",
    "overlap": null,
    "shifts": null,
    "shift_range": null,
    "harmonic_mask_width": 0.02
  }
}